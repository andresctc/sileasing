<?xml version="1.0" encoding="UTF-8"?>
<MessageFlow><ConfigurablePropertyTable><Documentation><longDesc value="Generated by com.ibm.etools.mft.pattern.mbi.mrrc.relmq Version 1.0     &#xd;&#xa;     &#xd;&#xa;$MQSI patternName=com.ibm.etools.mft.pattern.mbi.mrrc.relmq MQSI$     &#xd;&#xa;$MQSI patternVersion=1.0 MQSI$     "/><version value="$MQSI_VERSION=1 MQSI$"/></Documentation><ConfigurableProperty brokerDefault="no" nodeName="ComIbmCompute" nodePluginId="com.ibm.etools.mft.ibmnodes" propertyCompiler="com.ibm.etools.mft.ibmnodes.compilers.BooleanPropertyCompiler" type="Boolean" uri="mqsi.Error#Build Error Message.connectDatasourceBeforeFlowStarts"><Documentation><longDesc/></Documentation><TargetProperty name="connectDatasourceBeforeFlowStarts" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_7"/></ConfigurableProperty><ConfigurableProperty nodeName="ComIbmCompute" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Error#Build Error Message.dataSource"><Documentation><longDesc/></Documentation><TargetProperty name="dataSource" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_7"/></ConfigurableProperty><ConfigurableProperty brokerDefault="none" nodeName="ComIbmCompute" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Error#Build Error Message.validateMaster"><Documentation><longDesc/></Documentation><TargetProperty name="validateMaster" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_7"/></ConfigurableProperty><ConfigurableProperty brokerDefault="no" nodeName="ComIbmCompute" nodePluginId="com.ibm.etools.mft.ibmnodes" propertyCompiler="com.ibm.etools.mft.ibmnodes.compilers.BooleanPropertyCompiler" type="Boolean" uri="mqsi.Error#Create Error Response.connectDatasourceBeforeFlowStarts"><Documentation><longDesc/></Documentation><TargetProperty name="connectDatasourceBeforeFlowStarts" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_1"/></ConfigurableProperty><ConfigurableProperty nodeName="ComIbmCompute" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Error#Create Error Response.dataSource"><Documentation><longDesc/></Documentation><TargetProperty name="dataSource" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_1"/></ConfigurableProperty><ConfigurableProperty brokerDefault="none" nodeName="ComIbmCompute" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Error#Create Error Response.validateMaster"><Documentation><longDesc/></Documentation><TargetProperty name="validateMaster" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_1"/></ConfigurableProperty><ConfigurableProperty nodeName="ComIbmMQOutput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Error#Error Output.queueManagerName"><Documentation><longDesc/></Documentation><TargetProperty name="queueManagerName" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_12"/></ConfigurableProperty><ConfigurableProperty nodeName="ComIbmMQOutput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Error#Error Output.queueName"><Documentation><longDesc/></Documentation><TargetProperty name="queueName" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_12"/></ConfigurableProperty><ConfigurableProperty nodeName="ComIbmMQOutput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Error#Error Output.replyToQ"><Documentation><longDesc/></Documentation><TargetProperty name="replyToQ" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_12"/></ConfigurableProperty><ConfigurableProperty nodeName="ComIbmMQOutput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Error#Error Output.replyToQMgr"><Documentation><longDesc/></Documentation><TargetProperty name="replyToQMgr" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_12"/></ConfigurableProperty><ConfigurableProperty brokerDefault="" nodeName="ComIbmMQOutput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Error#Error Output.securityProfileName"><Documentation><longDesc/></Documentation><TargetProperty name="securityProfileName" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_12"/></ConfigurableProperty><ConfigurableProperty brokerDefault="inherit" nodeName="ComIbmMQOutput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Error#Error Output.validateMaster"><Documentation><longDesc/></Documentation><TargetProperty name="validateMaster" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_12"/></ConfigurableProperty><ConfigurableProperty brokerDefault="no" nodeName="ComIbmFilter" nodePluginId="com.ibm.etools.mft.ibmnodes" propertyCompiler="com.ibm.etools.mft.ibmnodes.compilers.BooleanPropertyCompiler" type="Boolean" uri="mqsi.Error#ErrorLoggingOn?.connectDatasourceBeforeFlowStarts"><Documentation><longDesc/></Documentation><TargetProperty name="connectDatasourceBeforeFlowStarts" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_8"/></ConfigurableProperty><ConfigurableProperty nodeName="ComIbmFilter" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Error#ErrorLoggingOn?.dataSource"><Documentation><longDesc/></Documentation><TargetProperty name="dataSource" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_8"/></ConfigurableProperty><ConfigurableProperty brokerDefault="no" nodeName="ComIbmFilter" nodePluginId="com.ibm.etools.mft.ibmnodes" propertyCompiler="com.ibm.etools.mft.ibmnodes.compilers.BooleanPropertyCompiler" type="Boolean" uri="mqsi.Error#Reply if Request Mode.connectDatasourceBeforeFlowStarts"><Documentation><longDesc/></Documentation><TargetProperty name="connectDatasourceBeforeFlowStarts" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_2"/></ConfigurableProperty><ConfigurableProperty nodeName="ComIbmFilter" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Error#Reply if Request Mode.dataSource"><Documentation><longDesc/></Documentation><TargetProperty name="dataSource" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_2"/></ConfigurableProperty><ConfigurableProperty brokerDefault="inherit" nodeName="ComIbmMQOutput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Error#Reply.validateMaster"><Documentation><longDesc/></Documentation><TargetProperty name="validateMaster" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_4.ComIbmMQReply#FCMComposite_1_1"/></ConfigurableProperty><ConfigurableProperty nodeName="ComIbmMQOutput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Request#AS400IN.queueManagerName"><Documentation><longDesc/></Documentation><TargetProperty name="queueManagerName" uuid="mqsi/Request#FCMComposite_1_4"/></ConfigurableProperty><ConfigurableProperty nodeName="ComIbmMQOutput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Request#AS400IN.queueName"><Documentation><longDesc/></Documentation><TargetProperty name="queueName" uuid="mqsi/Request#FCMComposite_1_4"/></ConfigurableProperty><ConfigurableProperty nodeName="ComIbmMQOutput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Request#AS400IN.replyToQ"><Documentation><longDesc/></Documentation><TargetProperty name="replyToQ" uuid="mqsi/Request#FCMComposite_1_4"/></ConfigurableProperty><ConfigurableProperty nodeName="ComIbmMQOutput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Request#AS400IN.replyToQMgr"><Documentation><longDesc/></Documentation><TargetProperty name="replyToQMgr" uuid="mqsi/Request#FCMComposite_1_4"/></ConfigurableProperty><ConfigurableProperty brokerDefault="" nodeName="ComIbmMQOutput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Request#AS400IN.securityProfileName"><Documentation><longDesc/></Documentation><TargetProperty name="securityProfileName" uuid="mqsi/Request#FCMComposite_1_4"/></ConfigurableProperty><ConfigurableProperty brokerDefault="inherit" nodeName="ComIbmMQOutput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Request#AS400IN.validateMaster"><Documentation><longDesc/></Documentation><TargetProperty name="validateMaster" uuid="mqsi/Request#FCMComposite_1_4"/></ConfigurableProperty><ConfigurableProperty nodeName="mqsi/Error" nodePluginId="LeasingFlows" type="Boolean" uri="mqsi.Request#ErrorLoggingOn" userDefined="true"><Documentation><longDesc value="Generated by com.ibm.etools.mft.pattern.mbi.mrrc.relmq Version 1.0     &#xd;&#xa;     &#xd;&#xa;$MQSI patternName=com.ibm.etools.mft.pattern.mbi.mrrc.relmq MQSI$     &#xd;&#xa;$MQSI patternVersion=1.0 MQSI$     "/></Documentation><TargetProperty name="ErrorLoggingOn" uuid="mqsi/Request#FCMComposite_1_6"/><TargetProperty name="ErrorLoggingOn" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_1"/><TargetProperty name="ErrorLoggingOn" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_2"/><TargetProperty name="ErrorLoggingOn" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_7"/><TargetProperty name="ErrorLoggingOn" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_8"/></ConfigurableProperty><ConfigurableProperty brokerDefault="0" nodeName="ComIbmMQInput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="Integer" uri="mqsi.Request#HostOut.additionalInstances"><Documentation><longDesc/></Documentation><TargetProperty name="additionalInstances" uuid="mqsi/Request#FCMComposite_1_1"/></ConfigurableProperty><ConfigurableProperty brokerDefault="flow" nodeName="ComIbmMQInput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Request#HostOut.componentLevel"><Documentation><longDesc/></Documentation><TargetProperty name="componentLevel" uuid="mqsi/Request#FCMComposite_1_1"/></ConfigurableProperty><ConfigurableProperty nodeName="ComIbmMQInput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Request#HostOut.queueName"><Documentation><longDesc/></Documentation><TargetProperty name="queueName" uuid="mqsi/Request#FCMComposite_1_1"/></ConfigurableProperty><ConfigurableProperty brokerDefault="-1" nodeName="ComIbmMQInput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="Integer" uri="mqsi.Request#HostOut.resetBrowseTimeout"><Documentation><longDesc/></Documentation><TargetProperty name="resetBrowseTimeout" uuid="mqsi/Request#FCMComposite_1_1"/></ConfigurableProperty><ConfigurableProperty brokerDefault="" nodeName="ComIbmMQInput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Request#HostOut.securityProfileName"><Documentation><longDesc/></Documentation><TargetProperty name="securityProfileName" uuid="mqsi/Request#FCMComposite_1_1"/></ConfigurableProperty><ConfigurableProperty nodeName="ComIbmMQInput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Request#HostOut.serializationToken"><Documentation><longDesc/></Documentation><TargetProperty name="serializationToken" uuid="mqsi/Request#FCMComposite_1_1"/></ConfigurableProperty><ConfigurableProperty nodeName="ComIbmMQInput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Request#HostOut.topicProperty"><Documentation><longDesc/></Documentation><TargetProperty name="topicProperty" uuid="mqsi/Request#FCMComposite_1_1"/></ConfigurableProperty><ConfigurableProperty brokerDefault="none" nodeName="ComIbmMQInput" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Request#HostOut.validateMaster"><Documentation><longDesc/></Documentation><TargetProperty name="validateMaster" uuid="mqsi/Request#FCMComposite_1_1"/></ConfigurableProperty><ConfigurableProperty brokerDefault="no" nodeName="ComIbmCompute" nodePluginId="com.ibm.etools.mft.ibmnodes" propertyCompiler="com.ibm.etools.mft.ibmnodes.compilers.BooleanPropertyCompiler" type="Boolean" uri="mqsi.Request#Set Request Mode.connectDatasourceBeforeFlowStarts"><Documentation><longDesc/></Documentation><TargetProperty name="connectDatasourceBeforeFlowStarts" uuid="mqsi/Request#FCMComposite_1_6"/></ConfigurableProperty><ConfigurableProperty nodeName="ComIbmCompute" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Request#Set Request Mode.dataSource"><Documentation><longDesc/></Documentation><TargetProperty name="dataSource" uuid="mqsi/Request#FCMComposite_1_6"/></ConfigurableProperty><ConfigurableProperty brokerDefault="none" nodeName="ComIbmCompute" nodePluginId="com.ibm.etools.mft.ibmnodes" type="String" uri="mqsi.Request#Set Request Mode.validateMaster"><Documentation><longDesc/></Documentation><TargetProperty name="validateMaster" uuid="mqsi/Request#FCMComposite_1_6"/></ConfigurableProperty><ConfigurableProperty nodeName="DTXPlugIn" nodePluginId="com.ibm.websphere.dtx.WTXPlugIn" type="String" uri="mqsi.RequestProcessor#Entrada.CacheMap"><Documentation><longDesc/></Documentation><TargetProperty name="CacheMap" uuid="mqsi/Request#FCMComposite_1_34.mqsi/RequestProcessor#FCMComposite_1_2"/></ConfigurableProperty><ConfigurableProperty nodeName="DTXPlugIn" nodePluginId="com.ibm.websphere.dtx.WTXPlugIn" type="String" uri="mqsi.RequestProcessor#Entrada.CardNoToWire"><Documentation><longDesc/></Documentation><TargetProperty name="CardNoToWire" uuid="mqsi/Request#FCMComposite_1_34.mqsi/RequestProcessor#FCMComposite_1_2"/></ConfigurableProperty><ConfigurableProperty nodeName="DTXPlugIn" nodePluginId="com.ibm.websphere.dtx.WTXPlugIn" type="String" uri="mqsi.RequestProcessor#Entrada.MapServerLocation"><Documentation><longDesc/></Documentation><TargetProperty name="MapServerLocation" uuid="mqsi/Request#FCMComposite_1_34.mqsi/RequestProcessor#FCMComposite_1_2"/></ConfigurableProperty></ConfigurablePropertyTable><ComIbmMQInputNode label="HostOut" uuid="mqsi/Request#FCMComposite_1_1"/><DTXPlugInNode ExeMapLabel_SetWorkDir="/LeasingWTX" ExternalButton="P" MarFileName="RequestProcessor.Entrada.ActualizacionClientesRequest.mar" ProjectButton="P" label="Request Processor.Entrada" uuid="mqsi/Request#FCMComposite_1_34.mqsi/RequestProcessor#FCMComposite_1_2"><ExecutableMapProperty xml:space="preserve">ActualizacionClientesRequest</ExecutableMapProperty><SourceMapProperty xml:space="preserve">LeasingWTX\HostToAS400.mms</SourceMapProperty><Attribute type="Complex" uuid="OutputProperties"><MbTable><Row><OutNo type="Integer">1</OutNo><MessageDomain type="String">BLOB</MessageDomain><MessageSet type="String"></MessageSet><MessageType type="String"></MessageType><MessageFormat type="String"></MessageFormat><CCSID type="Integer">0</CCSID><Encoding type="Integer">0</Encoding></Row></MbTable></Attribute><Terminal label="out1" type="output"/></DTXPlugInNode><ComIbmMQOutputNode label="AS400IN" persistenceMode="yes" transactionMode="yes" uuid="mqsi/Request#FCMComposite_1_4"/><ComIbmComputeNode label="Error.Create Error Response" throwExceptionOnDatabaseError="no" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_1"><computeExpressionProperty xml:space="preserve">
CREATE SCHEMA mqsi PATH ""

DECLARE RequestLoggingOn  EXTERNAL BOOLEAN TRUE;
DECLARE ResponseLoggingOn  EXTERNAL BOOLEAN TRUE;
DECLARE ErrorLoggingOn  EXTERNAL BOOLEAN TRUE;
DECLARE Aplicacion  EXTERNAL CHARACTER 'LEASING';
DECLARE Operacion  EXTERNAL CHARACTER 'ActualizacionClientesLeasing';
CREATE COMPUTE MODULE Create_Error_Reply&#xd;
	CREATE FUNCTION Main() RETURNS BOOLEAN&#xd;
	BEGIN&#xd;
-- Copy MQMD which contains reply address&#xd;
	SET OutputRoot.MQMD = InputRoot.MQMD;&#xd;
-- Set CorrelId to message ID so requester can retrieve by correlId&#xd;
	SET OutputRoot.MQMD.CorrelId = InputRoot.MQMD.MsgId;&#xd;
-- Set up Error response&#xd;
	CREATE NEXTSIBLING OF OutputRoot.MQMD DOMAIN('XMLNSC') NAME 'XMLNSC';&#xd;
	SET OutputRoot.XMLNSC.Error.Status = -1;&#xd;
	SET OutputRoot.XMLNSC.Error.Text = 'Failed to send message, in the Message Correlator for WebSphere MQ: request-response with persistence pattern';	&#xd;
	RETURN TRUE;&#xd;
	END;&#xd;
END MODULE;</computeExpressionProperty></ComIbmComputeNode><ComIbmFilterNode label="Error.Reply if Request Mode" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_2"><filterExpressionProperty xml:space="preserve">
CREATE SCHEMA mqsi PATH ""

DECLARE RequestLoggingOn  EXTERNAL BOOLEAN TRUE;
DECLARE ResponseLoggingOn  EXTERNAL BOOLEAN TRUE;
DECLARE ErrorLoggingOn  EXTERNAL BOOLEAN TRUE;
DECLARE Aplicacion  EXTERNAL CHARACTER 'LEASING';
DECLARE Operacion  EXTERNAL CHARACTER 'ActualizacionClientesLeasing';
CREATE FILTER MODULE Request_Check&#xd;
	CREATE FUNCTION Main() RETURNS BOOLEAN&#xd;
	BEGIN&#xd;
-- Do not send a reply if this message has already been backed out&#xd;
	IF Root.MQMD.BackoutCount &gt; 0 THEN RETURN FALSE; END IF;&#xd;
-- Only send a reply if in request mode (do not know where to go if error is in response flow)&#xd;
	IF  Environment.Variables.RRMode = 'Request' &#xd;
	THEN RETURN TRUE;&#xd;
	ELSE RETURN FALSE;&#xd;
	END IF;&#xd;
	END;&#xd;
END MODULE;</filterExpressionProperty></ComIbmFilterNode><ComIbmMQOutputNode destinationMode="reply" label="Error.Reply.ComIbmMQOutput" persistenceMode="yes" transactionMode="no" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_4.ComIbmMQReply#FCMComposite_1_1"/><ComIbmFlowOrderNode label="Error.Reply First" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_3"/><ComIbmComputeNode label="Error.Build Error Message" throwExceptionOnDatabaseError="no" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_7"><computeExpressionProperty xml:space="preserve">
CREATE SCHEMA mqsi PATH ""

DECLARE RequestLoggingOn  EXTERNAL BOOLEAN TRUE;
DECLARE ResponseLoggingOn  EXTERNAL BOOLEAN TRUE;
DECLARE ErrorLoggingOn  EXTERNAL BOOLEAN TRUE;
DECLARE Aplicacion  EXTERNAL CHARACTER 'LEASING';
DECLARE Operacion  EXTERNAL CHARACTER 'ActualizacionClientesLeasing';
CREATE COMPUTE MODULE Build_Error_Message&#xd;
	CREATE FUNCTION Main() RETURNS BOOLEAN&#xd;
	BEGIN&#xd;
	SET OutputRoot.MQMD = InputRoot.MQMD;&#xd;
	SET OutputRoot.Properties = NULL;&#xd;
	Call AddExceptionData();&#xd;
    END;&#xd;
	&#xd;
	CREATE PROCEDURE AddExceptionData() BEGIN&#xd;
	CREATE NEXTSIBLING OF OutputRoot.MQMD DOMAIN('XMLNSC') NAME 'XMLNSC';&#xd;
	SET OutputRoot.XMLNSC.Error.BrokerName  = SQL.BrokerName;&#xd;
	DECLARE ERef REFERENCE TO OutputRoot.XMLNSC.Error;&#xd;
	SET ERef.MessageFlowLabel = SQL.MessageFlowLabel; &#xd;
    SET ERef.DTSTAMP =   CURRENT_TIMESTAMP;  &#xd;
	SET ERef.StatusCode = -1;&#xd;
     &#xd;
    -- Add some exception data for error and fault&#xd;
		DECLARE Error INTEGER;&#xd;
		DECLARE Text CHARACTER;&#xd;
		DECLARE Label CHARACTER;&#xd;
		DECLARE I INTEGER 1;&#xd;
		DECLARE K INTEGER;&#xd;
		DECLARE start REFERENCE TO InputExceptionList.*[1];&#xd;
&#xd;
		WHILE start.Number IS NOT NULL DO &#xd;
			SET Label = start.Label;&#xd;
			SET Error = start.Number;&#xd;
			IF Error = 3001 THEN&#xd;
				SET Text = start.Insert.Text;&#xd;
			ELSE&#xd;
				SET Text = start.Text;&#xd;
			END IF;&#xd;
			-- Don't include the "Caught exception and rethrowing message"&#xd;
			IF Error &lt;&gt; 2230 THEN&#xd;
				-- Process inserts&#xd;
				DECLARE Inserts Character;&#xd;
				DECLARE INS Integer;&#xd;
				SET Inserts = '';&#xd;
				-- Are there any inserts for this exception&#xd;
				IF EXISTS (start.Insert[]) THEN&#xd;
					-- If YES add them to inserts string&#xd;
				 	SET Inserts = Inserts || COALESCE(start.Insert[1].Text,'NULL')|| ' / ';&#xd;
				 	SET K = 1;&#xd;
				 	INSERTS: LOOP&#xd;
						IF CARDINALITY(start.Insert[])&gt; K &#xd;
						THEN &#xd;
							SET Inserts = Inserts || COALESCE(start.Insert[K+1].Text,'NULL')|| ' / ';&#xd;
						-- No more inserts to process&#xd;
						ELSE LEAVE INSERTS;&#xd;
						END IF;&#xd;
					SET K = K+1;&#xd;
					END LOOP INSERTS;&#xd;
				END IF;&#xd;
				SET ERef.Exception[I].Label = Label;&#xd;
				SET ERef.Exception[I].Error = Error;&#xd;
				SET ERef.Exception[I].Text = Text;&#xd;
				Set ERef.Exception[I].Inserts = COALESCE(Inserts, '');&#xd;
				&#xd;
				SET I = I+1; &#xd;
			END IF;&#xd;
			-- Move start to the last child of the field to which it currently points&#xd;
			MOVE start LASTCHILD;&#xd;
		END WHILE;&#xd;
&#xd;
	END;&#xd;
	&#xd;
&#xd;
END MODULE;</computeExpressionProperty></ComIbmComputeNode><ComIbmFilterNode label="Error.ErrorLoggingOn?" throwExceptionOnDatabaseError="no" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_8"><filterExpressionProperty xml:space="preserve">
CREATE SCHEMA mqsi PATH ""

DECLARE RequestLoggingOn  EXTERNAL BOOLEAN TRUE;
DECLARE ResponseLoggingOn  EXTERNAL BOOLEAN TRUE;
DECLARE ErrorLoggingOn  EXTERNAL BOOLEAN TRUE;
DECLARE Aplicacion  EXTERNAL CHARACTER 'LEASING';
DECLARE Operacion  EXTERNAL CHARACTER 'ActualizacionClientesLeasing';
CREATE FILTER MODULE ErrorQ_check&#xd;
	CREATE FUNCTION Main() RETURNS BOOLEAN&#xd;
	BEGIN&#xd;
-- Do not write a second error message if this message has already been backed out&#xd;
	IF Root.MQMD.BackoutCount &gt; 0 THEN RETURN FALSE; 		&#xd;
	ELSE RETURN ErrorLoggingOn;&#xd;
	END IF;&#xd;
	END;&#xd;
END MODULE;</filterExpressionProperty></ComIbmFilterNode><ComIbmMQOutputNode label="Error.Error Output" persistenceMode="yes" transactionMode="no" uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_12"/><ComIbmThrowNode label="Error.Throw" messageText="Pattern instance ConsultaFlow of the Message Correlator for WebSphere MQ: request-response with persistence pattern has rolled back the input message. See the previous messages for details of the error " uuid="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_5"/><ComIbmComputeNode computeMode="all" label="Set Request Mode" uuid="mqsi/Request#FCMComposite_1_6"><computeExpressionProperty xml:space="preserve">
CREATE SCHEMA mqsi PATH ""

DECLARE RequestLoggingOn  EXTERNAL BOOLEAN TRUE;
DECLARE ResponseLoggingOn  EXTERNAL BOOLEAN TRUE;
DECLARE ErrorLoggingOn  EXTERNAL BOOLEAN TRUE;
DECLARE Aplicacion  EXTERNAL CHARACTER 'LEASING';
DECLARE Operacion  EXTERNAL CHARACTER 'ActualizacionClientesLeasing';
CREATE COMPUTE MODULE Request_Initialise&#xd;
&#xd;
	CREATE FUNCTION Main() RETURNS BOOLEAN&#xd;
	BEGIN&#xd;
		SET OutputRoot = InputRoot;&#xd;
		&#xd;
		SET Environment.Variables.RRMode = 'Request';&#xd;
		&#xd;
		RETURN TRUE;&#xd;
	END;&#xd;
END MODULE;</computeExpressionProperty></ComIbmComputeNode><Connection sourceNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_1" sourceTerminal="out" targetNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_4.ComIbmMQReply#FCMComposite_1_1" targetTerminal="in"><LogicalConnection layer="1" sourceNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_1" sourceTerminal="out" targetNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_4" targetTerminal="in"/><LogicalConnection layer="2" sourceNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_4.ComIbmMQReply#InTerminal.in" sourceTerminal="out" targetNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_4.ComIbmMQReply#FCMComposite_1_1" targetTerminal="in"/></Connection><Connection sourceNode="mqsi/Request#FCMComposite_1_1" sourceTerminal="out" targetNode="mqsi/Request#FCMComposite_1_34.mqsi/RequestProcessor#FCMComposite_1_2" targetTerminal="in"><LogicalConnection layer="1" sourceNode="mqsi/Request#FCMComposite_1_1" sourceTerminal="out" targetNode="mqsi/Request#FCMComposite_1_34" targetTerminal="Input"/><LogicalConnection layer="2" sourceNode="mqsi/Request#FCMComposite_1_34.mqsi/RequestProcessor#InTerminal.Input" sourceTerminal="out" targetNode="mqsi/Request#FCMComposite_1_34.mqsi/RequestProcessor#FCMComposite_1_2" targetTerminal="in"/></Connection><Connection sourceNode="mqsi/Request#FCMComposite_1_34.mqsi/RequestProcessor#FCMComposite_1_2" sourceTerminal="out1" targetNode="mqsi/Request#FCMComposite_1_4" targetTerminal="in"><LogicalConnection layer="1" sourceNode="mqsi/Request#FCMComposite_1_34.mqsi/RequestProcessor#FCMComposite_1_2" sourceTerminal="out1" targetNode="mqsi/Request#FCMComposite_1_34.mqsi/RequestProcessor#OutTerminal.Output" targetTerminal="in"/><LogicalConnection layer="2" sourceNode="mqsi/Request#FCMComposite_1_34" sourceTerminal="Output" targetNode="mqsi/Request#FCMComposite_1_4" targetTerminal="in"/></Connection><Connection sourceNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_2" sourceTerminal="true" targetNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_1" targetTerminal="in"/><Connection sourceNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_3" sourceTerminal="first" targetNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_2" targetTerminal="in"/><Connection sourceNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_3" sourceTerminal="second" targetNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_8" targetTerminal="in"/><Connection sourceNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_7" sourceTerminal="out" targetNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_12" targetTerminal="in"/><Connection sourceNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_8" sourceTerminal="false" targetNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_5" targetTerminal="in"/><Connection sourceNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_8" sourceTerminal="unknown" targetNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_5" targetTerminal="in"/><Connection sourceNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_8" sourceTerminal="failure" targetNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_5" targetTerminal="in"/><Connection sourceNode="mqsi/Request#FCMComposite_1_6" sourceTerminal="out" targetNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_7" targetTerminal="in"><LogicalConnection layer="1" sourceNode="mqsi/Request#FCMComposite_1_6" sourceTerminal="out" targetNode="mqsi/Request#FCMComposite_1_5" targetTerminal="Input"/><LogicalConnection layer="2" sourceNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#InTerminal.Input" sourceTerminal="out" targetNode="mqsi/Request#FCMComposite_1_5.mqsi/Error#FCMComposite_1_7" targetTerminal="in"/></Connection><Connection sourceNode="mqsi/Request#FCMComposite_1_1" sourceTerminal="failure" targetNode="mqsi/Request#FCMComposite_1_6" targetTerminal="in"/><Connection sourceNode="mqsi/Request#FCMComposite_1_1" sourceTerminal="catch" targetNode="mqsi/Request#FCMComposite_1_6" targetTerminal="in"/></MessageFlow>